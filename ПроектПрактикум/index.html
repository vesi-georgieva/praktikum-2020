<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style/custom.css">
    <script src="js/main.js"></script>

    <!-- Bootstrap CSS -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />


    <title>World of Foodcraft</title>

</head>

<body>
    <!--Header-->
    <div class="row">
        <div class="header">
            <div class="fixed-top">
                <div class="collapse" id="navbarToggleExternalContent">
                    <div class="bg-dark p-4">
                        <div class="row d-flex justify-content-center">
                            <div class="col d-flex align-items-center">
                                <i id="home-icon" class="far fa-home mr-3"></i>
                                <span id="home-span">Home</span>
                            </div>
                            <div class="col d-flex align-items-center">
                                <i id="profil-icon" class="far fa-user-circle  mr-3"></i>
                                <span id="profil-span">Profil</span>
                            </div>
                            <div class="col d-flex align-items-center">
                                <i id="healthy-icon" class="far fa-apple-alt mr-3"></i>
                                <span id="healthy-span">Healthy life</span>
                            </div>
                            <div class="col d-flex align-items-center">
                                <i id="healthy-icon" class="fal fa-newspaper mr-3"></i>
                                <span id="articles-span">Articles</span>
                            </div>
                            <div class="col d-flex align-items-center">
                                <i id="exit-icon" class="far fa-sign-out-alt mr-3"></i>
                                <span id="exit-span">Exit</span>
                            </div>
                        </div>
                        <div class="row d-flex justify-content-end">
                            <button id="sign-in" class="btn mt-3 ">Sign in</button>
                            <button class="btn " display none></button>
                            <button id="sign-up" class="btn mt-3 ">Sign up</button>
                        </div>

                    </div>
                </div>
                <nav class="navbar navbar-dark bg-dark">
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <!--Carousel-->
    <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
            <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://health.clevelandclinic.org/wp-content/uploads/sites/3/2019/06/cropped-GettyImages-643764514.jpg"
                    class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                    <h5 class="text-success">"World of Foodcraft"</h5>
                    <p class="text-success">Find great recipes here and have fun</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://www.cameronhelps.ca/wp-content/uploads/2020/06/BG2.png" class="d-block w-100"
                    alt="...">
                <div class="carousel-caption d-none d-md-block">
                    <h5 class="text-success">"World of Foodcraft"</h5>
                    <p class="text-success">Find great recipes here and have fun</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="https://cdn.riviana.com/Images/Library/8/RivianaCorporate_MakingMealsMemorable_Carousel_v2.jpg"
                    class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                    <h5 class="text-success">"World of Foodcraft"</h5>
                    <p class="text-success">Find great recipes here and have fun</p>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <!--Selectors-->
    <div class="border border-success mt-2 rounded">
        <select id="select-query" class="custom-select text-success">
            <option selected disabled>Select recipes here...</option>
            <option value="soup">Soups</option>
            <option value="salad">Salads</option>
            <option value="dessert">Desserts</option>
            <option value="main">Main dishes</option>
            <option value="sandwich">Sandwiches</option>
            <option value="burger">Burgers</option>
            <option value="pasta">Pasta</option>
            <option value="pastry">Pastries</option>
            <option value="bread">Bread</option>
            <option value="cookie">Cookies</option>
            <option value="drink">Drinks</option>

        </select>
    </div>

    <!-- Change button, display none-->
    <div class="row">
        <button id="change-btn" type="button" class="btn btn-lg btn-block" style="display: none;">Change the result
            view</button>
    </div>

    <!-- Display response-->
    <div class="row ">
        <div class="display-response">

        </div>
    </div>
    <div class="row ">
        <div class="changed-display-response">

        </div>

    </div>

    <!--------------------------------------------------------------------------------------------------->
    <!--------------------------------------------------------------------------------------------------->
    <!-------------------------------------------Script-------------------------------------------------->

    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>

    <script>
        $(document).ready(function () {

            $('.carousel').carousel({
                interval: 7000
            })

            $("#select-query").change(function () {
                sendApiRequest();
                $("#change-btn").show();
            });

            function sendApiRequest() {

                const app_id = "60175aa9";
                const api_key = "cce503e200053ad769c22114bae0a8d1";
                var selectedQuery = $("#select-query").val();

                $.ajax({
                    method: "GET",
                    url: "https://api.edamam.com/search?app_id=" + app_id + "&app_key=" + api_key + "&q=" + selectedQuery,
                    dataType: "json"
                }).done(function (response) {
                    displayRecipeInfo(response);
                    console.log(response);
                }).fail(function () {
                    console.log("Something went wrong!");
                });
            }

            function displayRecipeInfo(data) {
                var image = '';
                var titleOfRecipe = '';
                var otherInfo = '';
                var url = '';

                for (i = 0; i < data.hits.length; i++) {
                    image = $('<img class= "aligning card z-depth-5 ml-5" id= "dynamic"><br><a href= ' + data.hits[i].recipe.url + '><button id="imagebutton" class="btn ml-5 mb-5"> Read More</button></a>');
                    titleOfRecipe = $('<h5 class= "center-align ml-5">' + data.hits[i].recipe.label + '</h5>');
                    info = $('<h5 class= "center-align ml-5"> By:' + data.hits[i].recipe.source + '</h5>');
                    url = data.hits[i].recipe.image;

                    titleOfRecipe.appendTo(".display-response");
                    info.appendTo(".display-response");
                    image.appendTo(".display-response");
                    image.attr('src', url);
                }
            }


            /*
            $("#change-btn").on('click', function () {
                const app_id = "60175aa9";
                const api_key = "cce503e200053ad769c22114bae0a8d1";
                var selectedQuery = $("#select-query").val();

                $.ajax({
                    method: "GET",
                    url: "https://api.edamam.com/search?app_id=" + app_id + "&app_key=" + api_key + "&q=" + selectedQuery,
                    dataType: "json"
                }).done(function (response) {
                    displayRecipeInfoNewView(response);
                    console.log(response);
                }).fail(function () {
                    console.log("failed");
                });

                $("div.display-response").toggleClass("changed-display-response");

            });

            function displayRecipeInfoNewView(data) {

                for (i = 0; i < data.hits.length; i++) {
                    image = $('<img class="ml-20" id= "dynamic-second"><br><a href= ' + data.hits[i].recipe.url + '><button id="imagebutton-second" class="btn ml-20 mb-2"> Read More</button></a>');
                    titleOfRecipe = $('<h5 class="center-align ml-20">' + data.hits[i].recipe.label + '</h5>');
                    info = $('<h5 class="center-align ml-20"> By:' + data.hits[i].recipe.source + '</h5>');
                    url = data.hits[i].recipe.image;

                    titleOfRecipe.appendTo(".changed-display-response");
                    info.appendTo(".changed-display-response");
                    image.appendTo(".changed-display-response");
                    image.attr('src', url);
                }
            } */

        });


    </script>

</body>

</html>